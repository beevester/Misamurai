var path=require("path"),spawn=require("cross-spawn"),httpServer=require("http-server"),server=httpServer.createServer({root:path.resolve(__dirname,"../../")});server.listen(8080);var args=process.argv.slice(2);-1===args.indexOf("--config")&&(args=args.concat(["--config","test/e2e/nightwatch.config.js"])),-1===args.indexOf("--env")&&(args=args.concat(["--env","chrome,phantomjs"]));var i=args.indexOf("--test");i>-1&&(args[i+1]="test/e2e/specs/"+args[i+1]+".js");var runner=spawn("./node_modules/.bin/nightwatch",args,{stdio:"inherit"});runner.on("exit",function(r){server.close(),process.exit(r)}),runner.on("error",function(r){throw server.close(),r});