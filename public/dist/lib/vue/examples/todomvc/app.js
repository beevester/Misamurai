function onHashChange(){var t=window.location.hash.replace(/#\/?/,"");filters[t]?app.visibility=t:(window.location.hash="",app.visibility="all")}var STORAGE_KEY="todos-vuejs-2.0",todoStorage={fetch:function(){var t=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");return t.forEach(function(t,o){t.id=o}),todoStorage.uid=t.length,t},save:function(t){localStorage.setItem(STORAGE_KEY,JSON.stringify(t))}},filters={all:function(t){return t},active:function(t){return t.filter(function(t){return!t.completed})},completed:function(t){return t.filter(function(t){return t.completed})}},app=new Vue({data:{todos:todoStorage.fetch(),newTodo:"",editedTodo:null,visibility:"all"},watch:{todos:{handler:function(t){todoStorage.save(t)},deep:!0}},computed:{filteredTodos:function(){return filters[this.visibility](this.todos)},remaining:function(){return filters.active(this.todos).length},allDone:{get:function(){return 0===this.remaining},set:function(t){this.todos.forEach(function(o){o.completed=t})}}},filters:{pluralize:function(t){return 1===t?"item":"items"}},methods:{addTodo:function(){var t=this.newTodo&&this.newTodo.trim();t&&(this.todos.push({id:todoStorage.uid++,title:t,completed:!1}),this.newTodo="")},removeTodo:function(t){this.todos.splice(this.todos.indexOf(t),1)},editTodo:function(t){this.beforeEditCache=t.title,this.editedTodo=t},doneEdit:function(t){this.editedTodo&&(this.editedTodo=null,t.title=t.title.trim(),t.title||this.removeTodo(t))},cancelEdit:function(t){this.editedTodo=null,t.title=this.beforeEditCache},removeCompleted:function(){this.todos=filters.active(this.todos)}},directives:{"todo-focus":function(t,o){o.value&&t.focus()}}});window.addEventListener("hashchange",onHashChange),onHashChange(),app.$mount(".todoapp");